# erlang

Приложение имеет 2 процесса (реализованы в модуле proc) – одно для приема и записи в хранилище ETS, второе для извлечения из таблицы хранилища и отправки.
При получении сообщений происходит валидация значений.
Отправка осуществляется с помощью таймера erlang:send_after(). При этом всегда запущен только один таймер для обработки самого раннего события, остальные ждут своей очереди в таблице.
Если пришло событие на замену, которое уже в таймере, или пришло более ранее событие, чем в таймере, тогда таймер отменяется, и создается новый для нужного события.
Удаление производится в том числе и для события, которое в таймере, если оно еще не сработало.
Запросы в таблицу происходят только если добавлено событие или отослано, т.е. пока таблица пустая, запросы не происходят.
Таким образом для работы всего приложения запускается не более 3 процессов + таблица ETS, что существенно сокращает потребление ресурсов. 
Модули - 
Check - валидация
Convert – конвертация времени
Event – обработка поступающих сообщений
Proc - процессы
Test – тестирование

Из недостатков – хранилище ETS обнуляется в случае ошибок. Пока не разбирался как с этим бороться. Возможно, тут можно полностью реализовать хранение в БД с индексом по полю времени в формате UNIX, что обеспечит быстрый доступ записи с минимальной датой.
